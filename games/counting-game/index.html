<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <meta name="theme-color" content="#667eea" />
    <meta name="mobile-web-app-capable" content="yes" />

    <!-- SEO Meta Tags -->
    <title>Free Counting Game for Kids | Learn Numbers, Addition & Subtraction Online | Play It My Way</title>
    <meta name="description" content="Play free counting & math games for kids online! Learn numbers 1-20, addition & subtraction. Fun educational math game for toddlers & preschoolers ages 3+. No download required!" />
    <meta name="keywords" content="counting games for kids, free math games online, learn numbers game, addition games for children, subtraction game kids, preschool math games free, toddler counting game, number learning games, educational math games, kindergarten math game, counting to 20 game, arithmetic games for kids" />
    <meta name="author" content="Play It My Way" />
    <meta name="robots" content="index, follow, max-image-preview:large" />

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Free Counting & Math Game for Kids | Learn Numbers Online" />
    <meta property="og:description" content="Fun counting game for children ages 3+. Learn numbers, addition & subtraction. Play free online - no download!" />
    <meta property="og:type" content="game" />
    <meta property="og:url" content="https://playitmyway.com/games/counting-game/" />
    <meta property="og:image" content="https://playitmyway.com/images/counting-game.jpg" />
    <meta property="og:site_name" content="Play It My Way" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Free Counting Game for Kids Online" />
    <meta name="twitter:description" content="Learn counting, addition & subtraction. Fun math game for preschoolers. 100% free!" />
    <meta name="twitter:image" content="https://playitmyway.com/images/counting-game.jpg" />

    <!-- Additional SEO Meta Tags -->
    <meta name="language" content="English" />
    <meta name="classification" content="Educational Math Game for Children" />
    <meta name="audience" content="children, kids, parents, teachers" />
    <link rel="canonical" href="https://playitmyway.com/games/counting-game/" />
    <style>
      body {
        font-family: "Comic Sans MS", "Arial Rounded MT Bold", "Arial",
          sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        margin: 0;
        padding: 20px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        font-size: 18px;
        line-height: 1.6;
      }

      .header {
        text-align: center;
        color: white;
        margin-bottom: 25px;
      }

      .header h1 {
        font-size: clamp(2em, 7vw, 2.5em);
        font-weight: bold;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        margin-bottom: 10px;
      }

      .header p {
        font-size: clamp(1.2em, 4vw, 1.4em);
        font-weight: 500;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      }

      .game-container {
        background: rgba(255, 255, 255, 0.9);
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        max-width: 600px;
        width: 100%;
      }

      .stats {
        display: flex;
        justify-content: space-around;
        margin-bottom: 25px;
        color: #333;
        font-size: clamp(1.1em, 4vw, 1.3em);
        font-weight: bold;
        text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
      }

      .game-mode {
        text-align: center;
        margin-bottom: 30px;
      }

      .mode-buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        margin-bottom: 20px;
      }

      .mode-btn {
        background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        font-size: 14px;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .mode-btn.active {
        background: linear-gradient(45deg, #4ecdc4, #44a08d);
      }

      .mode-btn:hover {
        transform: scale(1.05);
      }

      .question-area {
        text-align: center;
        margin-bottom: 30px;
        min-height: 100px;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .question {
        font-size: 24px;
        color: #333;
        margin-bottom: 20px;
      }

      .objects-container {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 20px;
      }

      .object {
        font-size: 2em;
        padding: 10px;
        border-radius: 10px;
        background: #f0f0f0;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .object:hover {
        transform: scale(1.1);
      }

      .object.selected {
        background: #a8e6cf;
        transform: scale(1.1);
      }

      .answer-options {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        margin-bottom: 20px;
      }

      .answer-btn {
        background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        color: white;
        border: none;
        padding: 15px;
        border-radius: 10px;
        font-size: 18px;
        cursor: pointer;
        transition: transform 0.2s;
      }

      .answer-btn:hover {
        transform: scale(1.05);
      }

      .answer-btn.correct {
        background: linear-gradient(45deg, #a8e6cf, #88d8c0);
      }

      .answer-btn.incorrect {
        background: linear-gradient(45deg, #ff6b6b, #ee5a52);
      }

      .feedback {
        text-align: center;
        font-size: 20px;
        font-weight: bold;
        margin: 20px 0;
        padding: 15px;
        border-radius: 10px;
        display: none;
      }

      .feedback.correct {
        background: #a8e6cf;
        color: #2d5a3d;
      }

      .feedback.incorrect {
        background: #ff6b6b;
        color: white;
      }

      .controls {
        text-align: center;
      }

      .btn {
        background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 25px;
        font-size: 16px;
        cursor: pointer;
        margin: 0 10px;
        transition: transform 0.2s;
      }

      .btn:hover {
        transform: scale(1.05);
      }

      .back-link {
        position: absolute;
        top: 20px;
        left: 20px;
        color: white;
        text-decoration: none;
        font-size: 18px;
        background: rgba(255, 255, 255, 0.2);
        padding: 10px 15px;
        border-radius: 20px;
        transition: background 0.3s;
      }

      .back-link:hover {
        background: rgba(255, 255, 255, 0.3);
      }

      .progress-bar {
        width: 100%;
        height: 20px;
        background: #f0f0f0;
        border-radius: 10px;
        overflow: hidden;
        margin-bottom: 20px;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(45deg, #a8e6cf, #88d8c0);
        transition: width 0.3s ease;
      }

      /* Mobile-specific improvements */
      @media (max-width: 768px) {
        body {
          padding: 10px;
          padding-top: 60px; /* Space for back link */
        }

        .header h1 {
          font-size: clamp(1.5em, 6vw, 2em);
        }

        .header p {
          font-size: clamp(0.9em, 3vw, 1em);
        }

        .game-container {
          padding: 20px;
          margin: 0 5px;
        }

        .mode-buttons {
          flex-direction: column;
          align-items: center;
          gap: 10px;
        }

        .mode-btn {
          padding: 10px 18px;
          font-size: clamp(1em, 4vw, 1.2em);
          font-weight: bold;
        }

        .question {
          font-size: clamp(1.4em, 5vw, 1.8em);
          font-weight: bold;
        }

        .objects-container {
          gap: 8px;
        }

        .object {
          font-size: clamp(1.5em, 5vw, 2em);
          padding: 8px;
        }

        .answer-options {
          grid-template-columns: repeat(2, 1fr);
          gap: 10px;
        }

        .answer-btn {
          padding: 14px;
          font-size: clamp(1.1em, 4vw, 1.3em);
          font-weight: bold;
        }

        .btn {
          padding: 12px 24px;
          font-size: clamp(1em, 4vw, 1.2em);
          font-weight: bold;
        }

        .back-link {
          top: 10px;
          left: 10px;
          font-size: clamp(0.9em, 3vw, 1em);
          padding: 8px 12px;
        }
      }

      @media (max-width: 480px) {
        body {
          padding-top: 50px; /* Less space on smaller screens */
        }

        .answer-options {
          grid-template-columns: 1fr;
        }

        .stats {
          flex-direction: column;
          gap: 10px;
          font-size: clamp(0.8em, 2.5vw, 1em);
        }

        .question-area {
          min-height: 80px;
        }
      }

      /* Prevent text selection on mobile */
      .mode-btn,
      .answer-btn,
      .btn,
      .object {
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        touch-action: manipulation;
      }

      /* Modal Styles */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        animation: fadeIn 0.3s ease;
      }

      .modal-overlay.show {
        display: flex;
      }

      .modal {
        background: white;
        border-radius: 20px;
        padding: 30px;
        text-align: center;
        max-width: 400px;
        width: 90%;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        animation: scaleIn 0.3s ease;
      }

      .modal h2 {
        font-size: 2em;
        margin-bottom: 15px;
        color: #333;
      }

      .modal p {
        font-size: 1.2em;
        color: #666;
        margin-bottom: 10px;
      }

      .modal .stats-display {
        background: linear-gradient(45deg, #a8e6cf, #88d8c0);
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
      }

      .modal .stats-display p {
        margin: 5px 0;
        color: #2d5a3d;
        font-weight: bold;
      }

      .modal .high-score {
        color: #ff6b6b;
        font-weight: bold;
      }

      .modal-btn {
        background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 25px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        margin: 10px;
        transition: transform 0.2s;
      }

      .modal-btn:hover {
        transform: scale(1.05);
      }

      .modal-close {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 1.5em;
        color: #999;
        cursor: pointer;
        line-height: 1;
      }

      .modal-close:hover {
        color: #333;
      }

      .modal {
        position: relative;
      }

      /* Confetti */
      .confetti {
        position: fixed;
        width: 10px;
        height: 10px;
        top: -10px;
        z-index: 1001;
        animation: confettiFall 3s linear forwards;
      }

      @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
      }

      @keyframes scaleIn {
        from { transform: scale(0.8); opacity: 0; }
        to { transform: scale(1); opacity: 1; }
      }

      @keyframes confettiFall {
        0% { transform: translateY(0) rotate(0deg); opacity: 1; }
        100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
      }

      /* Star Rating */
      .stars {
        font-size: 2.5em;
        margin: 10px 0;
      }

      .star {
        color: #ddd;
        transition: color 0.3s;
      }

      .star.filled {
        color: #ffd700;
      }

      /* Streak indicator */
      .streak-indicator {
        background: linear-gradient(45deg, #ffd700, #ffaa00);
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-weight: bold;
        display: none;
        animation: pulse 0.5s ease;
      }

      .streak-indicator.show {
        display: inline-block;
      }

      @keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
      }
    </style>
  </head>
  <body>
    <a href="../../" class="back-link">‚Üê Back to Games</a>

    <div class="header">
      <h1>üî¢ Count With Me</h1>
      <p>Learn to count and do simple math!</p>
    </div>

    <div class="game-container">
      <div class="stats">
        <div>Score: <span id="score">0</span></div>
        <div>Level: <span id="level">1</span></div>
        <div>Questions: <span id="questionNum">1</span>/10</div>
        <div class="streak-indicator" id="streakIndicator">üî• Streak: <span id="streak">0</span></div>
      </div>

      <div class="progress-bar">
        <div class="progress-fill" id="progressFill" style="width: 10%"></div>
      </div>

      <div class="game-mode">
        <h3>Choose Game Mode</h3>
        <div class="mode-buttons">
          <button class="mode-btn active" onclick="setMode('counting')">
            Count Objects
          </button>
          <button class="mode-btn" onclick="setMode('addition')">
            Addition
          </button>
          <button class="mode-btn" onclick="setMode('subtraction')">
            Subtraction
          </button>
        </div>
      </div>

      <div class="question-area">
        <div class="question" id="question">How many objects do you see?</div>
        <div class="objects-container" id="objectsContainer"></div>
      </div>

      <div class="answer-options" id="answerOptions"></div>

      <div class="feedback" id="feedback"></div>

      <div class="controls">
        <button class="btn" onclick="nextQuestion()">Next Question</button>
        <button class="btn" onclick="resetGame()">New Game</button>
      </div>
    </div>

    <!-- End Game Modal -->
    <div class="modal-overlay" id="endModal" onclick="closeModalOnOverlay(event)">
      <div class="modal">
        <span class="modal-close" onclick="closeModal()">‚úï</span>
        <h2>üéä Game Complete!</h2>
        <div class="stars" id="starRating">
          <span class="star">‚òÖ</span>
          <span class="star">‚òÖ</span>
          <span class="star">‚òÖ</span>
        </div>
        <div class="stats-display">
          <p>Final Score: <span id="finalScore">0</span></p>
          <p>Level Reached: <span id="finalLevel">1</span></p>
          <p>Best Streak: <span id="finalStreak">0</span></p>
          <p>Mode: <span id="finalMode">Counting</span></p>
        </div>
        <p id="highScoreMsg" class="high-score" style="display: none;">üèÜ New High Score!</p>
        <button class="modal-btn" onclick="closeModalAndRestart()">Play Again</button>
      </div>
    </div>

    <script>
      // Sound effects using Web Audio API
      const AudioContext = window.AudioContext || window.webkitAudioContext;
      let audioCtx = null;

      function initAudio() {
        if (!audioCtx) {
          audioCtx = new AudioContext();
        }
      }

      function playSound(type) {
        initAudio();
        const oscillator = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        oscillator.connect(gainNode);
        gainNode.connect(audioCtx.destination);

        switch(type) {
          case 'correct':
            oscillator.frequency.setValueAtTime(523, audioCtx.currentTime);
            oscillator.frequency.setValueAtTime(659, audioCtx.currentTime + 0.1);
            oscillator.type = 'sine';
            gainNode.gain.setValueAtTime(0.15, audioCtx.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.2);
            break;
          case 'wrong':
            oscillator.frequency.setValueAtTime(200, audioCtx.currentTime);
            oscillator.frequency.setValueAtTime(150, audioCtx.currentTime + 0.1);
            oscillator.type = 'square';
            gainNode.gain.setValueAtTime(0.08, audioCtx.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.2);
            break;
          case 'win':
            const notes = [523, 659, 784, 1047];
            notes.forEach((freq, i) => {
              const osc = audioCtx.createOscillator();
              const gain = audioCtx.createGain();
              osc.connect(gain);
              gain.connect(audioCtx.destination);
              osc.frequency.setValueAtTime(freq, audioCtx.currentTime + i * 0.15);
              osc.type = 'sine';
              gain.gain.setValueAtTime(0.15, audioCtx.currentTime + i * 0.15);
              gain.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + i * 0.15 + 0.3);
              osc.start(audioCtx.currentTime + i * 0.15);
              osc.stop(audioCtx.currentTime + i * 0.15 + 0.3);
            });
            return;
          case 'click':
            oscillator.frequency.setValueAtTime(400, audioCtx.currentTime);
            oscillator.type = 'sine';
            gainNode.gain.setValueAtTime(0.05, audioCtx.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.01, audioCtx.currentTime + 0.05);
            oscillator.start();
            oscillator.stop(audioCtx.currentTime + 0.05);
            break;
        }
      }

      function createConfetti() {
        const colors = ['#ff6b6b', '#4ecdc4', '#ffd700', '#a8e6cf', '#ff9ff3', '#54a0ff'];
        for (let i = 0; i < 50; i++) {
          const confetti = document.createElement('div');
          confetti.className = 'confetti';
          confetti.style.left = Math.random() * 100 + 'vw';
          confetti.style.background = colors[Math.floor(Math.random() * colors.length)];
          confetti.style.animationDelay = Math.random() * 2 + 's';
          confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 5000);
        }
      }

      function getStarRating(score) {
        if (score >= 90) return 3;
        if (score >= 60) return 2;
        return 1;
      }

      function displayStars(count) {
        const stars = document.querySelectorAll('#starRating .star');
        stars.forEach((star, i) => {
          star.classList.toggle('filled', i < count);
        });
      }

      function getHighScore(mode) {
        const key = `counting_highscore_${mode}`;
        return parseInt(localStorage.getItem(key)) || 0;
      }

      function setHighScore(mode, score) {
        const key = `counting_highscore_${mode}`;
        localStorage.setItem(key, score);
      }

      function showEndModal() {
        const modal = document.getElementById('endModal');
        document.getElementById('finalScore').textContent = score;
        document.getElementById('finalLevel').textContent = level;
        document.getElementById('finalStreak').textContent = bestStreak;
        document.getElementById('finalMode').textContent = currentMode.charAt(0).toUpperCase() + currentMode.slice(1);

        const stars = getStarRating(score);
        displayStars(stars);

        const highScore = getHighScore(currentMode);
        const highScoreMsg = document.getElementById('highScoreMsg');
        if (score > highScore) {
          setHighScore(currentMode, score);
          highScoreMsg.style.display = 'block';
        } else {
          highScoreMsg.style.display = 'none';
        }

        modal.classList.add('show');
        playSound('win');
        createConfetti();
      }

      function closeModal() {
        document.getElementById('endModal').classList.remove('show');
      }

      function closeModalOnOverlay(event) {
        if (event.target === event.currentTarget) {
          closeModal();
        }
      }

      function closeModalAndRestart() {
        closeModal();
        resetGame();
      }
      let currentMode = "counting";
      let score = 0;
      let level = 1;
      let questionNumber = 1;
      let currentQuestion = {};
      let selectedObjects = [];
      let streak = 0;
      let bestStreak = 0;

      const objects = [
        "üçé",
        "üçå",
        "üçá",
        "üçä",
        "üçì",
        "üçí",
        "ü•ù",
        "üçç",
        "ü•≠",
        "üçë",
      ];
      const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

      function setMode(mode) {
        currentMode = mode;
        document
          .querySelectorAll(".mode-btn")
          .forEach((btn) => btn.classList.remove("active"));
        event.target.classList.add("active");
        resetGame();
      }

      function generateCountingQuestion() {
        const count = Math.floor(Math.random() * 5) + 1;
        const object = objects[Math.floor(Math.random() * objects.length)];
        const objectArray = Array(count).fill(object);

        return {
          type: "counting",
          question: `How many ${object} do you see?`,
          objects: objectArray,
          answer: count,
          options: generateOptions(count),
        };
      }

      function generateAdditionQuestion() {
        const num1 = Math.floor(Math.random() * 5) + 1;
        const num2 = Math.floor(Math.random() * 5) + 1;
        const answer = num1 + num2;

        return {
          type: "addition",
          question: `What is ${num1} + ${num2}?`,
          objects: [],
          answer: answer,
          options: generateOptions(answer),
        };
      }

      function generateSubtractionQuestion() {
        const num1 = Math.floor(Math.random() * 8) + 3;
        const num2 = Math.floor(Math.random() * (num1 - 1)) + 1;
        const answer = num1 - num2;

        return {
          type: "subtraction",
          question: `What is ${num1} - ${num2}?`,
          objects: [],
          answer: answer,
          options: generateOptions(answer),
        };
      }

      function generateOptions(correctAnswer) {
        const options = [correctAnswer];
        while (options.length < 3) {
          const option = Math.floor(Math.random() * 10) + 1;
          if (!options.includes(option)) {
            options.push(option);
          }
        }
        return shuffleArray(options);
      }

      function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      function displayQuestion() {
        const questionDiv = document.getElementById("question");
        const objectsContainer = document.getElementById("objectsContainer");
        const answerOptions = document.getElementById("answerOptions");

        questionDiv.textContent = currentQuestion.question;

        // Display objects for counting mode
        objectsContainer.innerHTML = "";
        if (currentQuestion.type === "counting") {
          currentQuestion.objects.forEach((obj, index) => {
            const objectDiv = document.createElement("div");
            objectDiv.className = "object";
            objectDiv.textContent = obj;
            objectDiv.dataset.index = index;
            objectDiv.addEventListener("click", () => toggleObject(objectDiv));
            objectsContainer.appendChild(objectDiv);
          });
        }

        // Display answer options
        answerOptions.innerHTML = "";
        currentQuestion.options.forEach((option) => {
          const button = document.createElement("button");
          button.className = "answer-btn";
          button.textContent = option;
          button.addEventListener("click", () => checkAnswer(option));
          answerOptions.appendChild(button);
        });

        selectedObjects = [];
      }

      function toggleObject(objectDiv) {
        if (currentQuestion.type !== "counting") return;

        const index = parseInt(objectDiv.dataset.index);
        if (selectedObjects.includes(index)) {
          selectedObjects = selectedObjects.filter((i) => i !== index);
          objectDiv.classList.remove("selected");
        } else {
          selectedObjects.push(index);
          objectDiv.classList.add("selected");
        }
      }

      function checkAnswer(selectedAnswer) {
        const feedback = document.getElementById("feedback");
        const buttons = document.querySelectorAll(".answer-btn");

        buttons.forEach((btn) => {
          btn.disabled = true;
          if (parseInt(btn.textContent) === currentQuestion.answer) {
            btn.classList.add("correct");
          } else if (
            parseInt(btn.textContent) === selectedAnswer &&
            selectedAnswer !== currentQuestion.answer
          ) {
            btn.classList.add("incorrect");
          }
        });

        if (selectedAnswer === currentQuestion.answer) {
          playSound('correct');
          streak++;
          if (streak > bestStreak) bestStreak = streak;
          document.getElementById('streak').textContent = streak;
          if (streak >= 2) {
            document.getElementById('streakIndicator').classList.add('show');
          }
          feedback.textContent = streak >= 3 ? `üî• ${streak} in a row! +${10 + streak * 2} points!` : "üéâ Correct! Well done!";
          feedback.className = "feedback correct";
          score += 10 + (streak >= 3 ? streak * 2 : 0);
        } else {
          playSound('wrong');
          streak = 0;
          document.getElementById('streak').textContent = streak;
          document.getElementById('streakIndicator').classList.remove('show');
          feedback.textContent = `üòÖ Wrong! The answer is ${currentQuestion.answer}`;
          feedback.className = "feedback incorrect";
        }

        feedback.style.display = "block";
        document.getElementById("score").textContent = score;

        if (score >= level * 50) {
          level++;
          document.getElementById("level").textContent = level;
        }
      }

      function nextQuestion() {
        if (questionNumber >= 10) {
          endGame();
          return;
        }

        questionNumber++;
        document.getElementById("questionNum").textContent = questionNumber;
        document.getElementById("progressFill").style.width =
          questionNumber * 10 + "%";

        document.getElementById("feedback").style.display = "none";

        // Generate new question based on mode
        switch (currentMode) {
          case "counting":
            currentQuestion = generateCountingQuestion();
            break;
          case "addition":
            currentQuestion = generateAdditionQuestion();
            break;
          case "subtraction":
            currentQuestion = generateSubtractionQuestion();
            break;
        }

        displayQuestion();
      }

      function resetGame() {
        score = 0;
        level = 1;
        questionNumber = 1;
        selectedObjects = [];
        streak = 0;
        bestStreak = 0;

        document.getElementById('streak').textContent = 0;
        document.getElementById('streakIndicator').classList.remove('show');
        document.getElementById("score").textContent = score;
        document.getElementById("level").textContent = level;
        document.getElementById("questionNum").textContent = questionNumber;
        document.getElementById("progressFill").style.width = "10%";
        document.getElementById("feedback").style.display = "none";

        // Generate first question
        switch (currentMode) {
          case "counting":
            currentQuestion = generateCountingQuestion();
            break;
          case "addition":
            currentQuestion = generateAdditionQuestion();
            break;
          case "subtraction":
            currentQuestion = generateSubtractionQuestion();
            break;
        }

        displayQuestion();
      }

      function endGame() {
        showEndModal();
      }

      // Initialize game
      resetGame();
    </script>
  </body>
</html>
